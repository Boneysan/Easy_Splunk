#############################################
# versions.env
# Pure KEY=VALUE definitions; shell-safe comments only.
# Sourceable by POSIX sh/bash/dash/zsh and env tools.
#############################################

# Schema version for versions.env format; increment for breaking changes
VERSION_FILE_SCHEMA=1

# --- Splunk Core Services ---
SPLUNK_VERSION=9.1.2
SPLUNK_IMAGE_REPO=splunk/splunk
SPLUNK_IMAGE=${SPLUNK_IMAGE_REPO}:${SPLUNK_VERSION}

SPLUNK_UF_VERSION=9.1.2
SPLUNK_UF_IMAGE_REPO=splunk/universalforwarder
SPLUNK_UF_IMAGE=${SPLUNK_UF_IMAGE_REPO}:${SPLUNK_UF_VERSION}

# --- Application Services ---
APP_VERSION=3.5.1
APP_IMAGE_REPO=my-org/my-app
APP_IMAGE=${APP_IMAGE_REPO}:${APP_VERSION}

# --- Monitoring Stack ---
PROMETHEUS_VERSION=v2.53.0
PROMETHEUS_IMAGE_REPO=prom/prometheus
PROMETHEUS_IMAGE=${PROMETHEUS_IMAGE_REPO}:${PROMETHEUS_VERSION}

GRAFANA_VERSION=11.1.0
GRAFANA_IMAGE_REPO=grafana/grafana
GRAFANA_IMAGE=${GRAFANA_IMAGE_REPO}:${GRAFANA_VERSION}

NODE_EXPORTER_VERSION=v1.8.2
NODE_EXPORTER_IMAGE_REPO=prom/node-exporter
NODE_EXPORTER_IMAGE=${NODE_EXPORTER_IMAGE_REPO}:${NODE_EXPORTER_VERSION}

CADVISOR_VERSION=v0.47.2
CADVISOR_IMAGE_REPO=gcr.io/cadvisor/cadvisor
CADVISOR_IMAGE=${CADVISOR_IMAGE_REPO}:${CADVISOR_VERSION}

# --- Infrastructure & Utilities ---
REDIS_VERSION=7.2.5
REDIS_IMAGE_REPO=redis
REDIS_IMAGE=${REDIS_IMAGE_REPO}:${REDIS_VERSION}

NGINX_VERSION=1.25.3
NGINX_IMAGE_REPO=nginx
NGINX_IMAGE=${NGINX_IMAGE_REPO}:${NGINX_VERSION}

# --- Security & TLS ---
OPENSSL_VERSION=3.1.4
OPENSSL_IMAGE_REPO=alpine/openssl
OPENSSL_IMAGE=${OPENSSL_IMAGE_REPO}:${OPENSSL_VERSION}

# --- Base Images ---
ALPINE_VERSION=3.19.0
ALPINE_IMAGE_REPO=alpine
ALPINE_IMAGE=${ALPINE_IMAGE_REPO}:${ALPINE_VERSION}

UBUNTU_VERSION=22.04
UBUNTU_IMAGE_REPO=ubuntu
UBUNTU_IMAGE=${UBUNTU_IMAGE_REPO}:${UBUNTU_VERSION}

# --- Air-gapped Bundle Metadata ---
BUNDLE_VERSION=${APP_VERSION}
# Fixed for reproducibility in air-gapped environments
BUNDLE_CREATED_DATE=2025-08-13T00:00:00Z
# Architectures to include in bundles (comma-separated)
BUNDLE_ARCHITECTURE=linux/amd64,linux/arm64

# === Validation Patterns ======================================================
# These patterns can be used by tooling to validate formats
# Matches: x.y.z | vX.Y.Z | x.y.z-prerelease | x.y.z+build | x.y.z-prerelease+build
VERSION_PATTERN_SEMVER='^v?[0-9]+\.[0-9]+\.[0-9]+$|^v?[0-9]+\.[0-9]+\.[0-9]+-[A-Za-z0-9._-]+$|^v?[0-9]+\.[0-9]+\.[0-9]+\+[A-Za-z0-9._-]+$|^v?[0-9]+\.[0-9]+\.[0-9]+-[A-Za-z0-9._-]+\+[A-Za-z0-9._-]+$'
VERSION_PATTERN_STRICT_SEMVER='^[0-9]+\.[0-9]+\.[0-9]+$'
VERSION_PATTERN_PROMETHEUS='^v[0-9]+\.[0-9]+\.[0-9]+$'

# SHA-256 digests are 64-character hexadecimal strings
DIGEST_PATTERN_SHA256='^sha256:[a-f0-9]{64}$'
REPO_PATTERN='^[a-z0-9]+([.-][a-z0-9]+)*/[a-z0-9]+([.-][a-z0-9]+)*$'

# Notes:
# - Keep this file data-only. Do NOT use readonly, export, or functions.
# - Avoid command substitution; set concrete values here.
# - Prefer repo@sha256:... (immutable) over repo:tag (mutable).
# - For air-gapped deployments, pre-pull images using these digests.
# - Update BUNDLE_VERSION when any core service version changes.